var app=angular.module("theodo-test",["ionic","react","theodo-test.controllers"]).run(["$ionicPlatform",function(e){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}]);app.directive("map",["reactDirective",function(e){return e(Map)}]),app.directive("selectOnClick",function(){return{restrict:"A",link:function(e,t){t.on("click",function(){this.select()})}}}),function(){var e=angular.module("theodo-test.controllers",["theodo-test.services"]);e.controller("MainController",["$scope","mapService","$timeout","$ionicPopup",function(e,t,o,n){function a(t){t||(t={}),e.total=0;for(var o=0;o<e.size.rows;o++){e.map[o]||(e.map[o]=[]);for(var n=0;n<e.size.columns;n++){var a=0;t.random&&(a=s(0,m)),t.keepValues&&e.map[o][n]||(e.map[o][n]={value:a,selected:!1})}e.map[o].length=e.size.columns}e.map.length=e.size.rows}function r(){e.size.edit={rows:e.size.rows,columns:e.size.columns};n.show({templateUrl:"parameters.html",title:"Map details",scope:e,buttons:[{text:"Close"}]})}function i(){f.forEach(function(e){o.cancel(e)});for(var t=0;t<e.size.rows;t++)for(var n=0;n<e.size.columns;n++)document.getElementById(t+"_"+n).className="tile"}function s(e,t){return Math.floor(Math.random()*(t-e+1))+e}function c(){i();for(var n=[],a=0;a<e.size.rows;a++)n[a]=e.map[a].map(function(e){return e.value});var r=t.getBestPath(n);e.total=0,r.moves.forEach(function(t,n){var a=t[0],r=t[1];f.push(o(function(){e.total+=e.map[a][r].value,document.getElementById(a+"_"+r).className+=" selected"},l*(n+1)))})}var l=100,u=100,m=99,f=[];!function(){e.size={rows:10,columns:10},e.map=[],a(),e.MAX_MAP_SIZE=u,r()}(),e.showParameters=function(){r()},e.randomize=function(){a({random:!0}),i()},e.changeSize=function(){e.size.edit.columns&&e.size.edit.rows&&(e.size.columns=e.size.edit.columns,e.size.rows=e.size.edit.rows,a({keepValues:!0}))},e.resetPath=function(){i()},e.incrTile=function(t,o){t[o].value=(t[o].value+1)%(m+1),e.resetPath()},e.incrTileReact=function(t,o){e.map[t][o].value=(e.map[t][o].value+1)%(m+1),e.resetPath()},e.resetMap=function(){a(),i()},e.calculatePath=function(){c()}}])}(),function(){var e=angular.module("theodo-test.services",[]);e.service("mapService",function(){this.getBestPath=function(e){function t(t){var r=t[0],i=t[1],s={total:0,moves:[]};if(o>r+1&&(s=a[0][r+1]),n>i+1){var c=a[1][r];c.total>=s.total&&(s=c)}var l={total:e[r][i]+s.total,moves:s.moves.slice()};l.moves.push([r,i]),a[0][r]=l}for(var o=e.length,n=e[0].length,a=[],r=0;2>r;r++){a[r]=[];for(var i=0;o>i;i++)a[r][i]={}}for(var r=n-1;r>=0;r--){for(var i=o-1;i>=0;i--)t([i,r]);a[1]=a[0]}var s=a[0][0];return s.moves.reverse(),s}})}();